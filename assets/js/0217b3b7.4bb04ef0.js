(self.webpackChunk=self.webpackChunk||[]).push([[3345],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return g}});var r=n(67294),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a().createContext({}),u=function(e){var t=a().useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=u(e.components);return a().createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a().createElement(a().Fragment,{},t)}},m=a().forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),c=u(n),m=r,g=c["".concat(o,".").concat(m)]||c[m]||d[m]||i;return n?a().createElement(g,l(l({ref:t},s),{},{components:n})):a().createElement(g,l({ref:t},s))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return a().createElement.apply(null,o)}return a().createElement.apply(null,n)}m.displayName="MDXCreateElement"},69168:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return s},toc:function(){return u},default:function(){return d}});var r=n(74034),a=n(79973),i=(n(67294),n(3905)),o=["components"],l={title:"Web App Reference"},p=void 0,s={unversionedId:"plugins/plugin_webapp_reference",id:"plugins/plugin_webapp_reference",isDocsHomePage:!1,title:"Web App Reference",description:"PluginClass",source:"@site/../docs/plugins/plugin_webapp_reference.md",sourceDirName:"plugins",slug:"/plugins/plugin_webapp_reference",permalink:"/plugins/plugin_webapp_reference",version:"current",frontMatter:{title:"Web App Reference"}},u=[{value:"PluginClass",id:"pluginclass",children:[{value:"Example",id:"example",children:[]}]},{value:"Registry",id:"registry",children:[{value:"registerObjectHomeComponent",id:"registerobjecthomecomponent",children:[]}]},{value:"Exported Libraries and Functions",id:"exported-libraries-and-functions",children:[{value:"ReactSteedos",id:"reactsteedos",children:[]}]}],c={toc:u};function d(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"pluginclass"},"PluginClass"),(0,i.kt)("p",null,"The PluginClass interface defines two methods used by the Steedos web app to ",(0,i.kt)("inlineCode",{parentName:"p"},"initialize")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"uninitialize")," your plugin:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"class PluginClass {\n    /**\n    * initialize is called by the webapp when the plugin is first loaded.\n    * Receives the following:\n    * - registry - an instance of the registry tied to your plugin id\n    * - store - the Redux store of the web app.\n    */\n    initialize(registry, store)\n\n    /**\n    * uninitialize is called by the webapp if your plugin is uninstalled\n    */\n    uninitialize()\n}\n")),(0,i.kt)("p",null,"Your plugin should implement this class and register it using the global ",(0,i.kt)("inlineCode",{parentName:"p"},"registerPlugin")," method defined on the window by the webapp:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"window.registerPlugin('myplugin', new PluginClass());\n")),(0,i.kt)("p",null,"Use the provided ",(0,i.kt)("a",{parentName:"p",href:"#registry"},"registry")," to register components, post type overrides and callbacks. Use the store to access the global state of the web app, but note that you should use the registry to register any custom reducers your plugin might require."),(0,i.kt)("h3",{id:"example"},"Example"),(0,i.kt)("p",null,"The entry point ",(0,i.kt)("inlineCode",{parentName:"p"},"index.js")," of your application might contain:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"import UserPopularity from './components/profile_popover/user_popularity';\nimport SomePost from './components/some_post';\nimport MenuIcon from './components/menu_icon';\nimport {openExampleModal} from './actions';\n\nclass PluginClass {\n    initialize(registry, store) {\n        registry.registerPopoverUserAttributesComponent(\n            UserPopularity,\n        );\n        registry.registerPostTypeComponent(\n            'custom_somepost',\n            SomePost,\n        );\n        registry.registerMainMenuAction(\n            'Plugin Menu Item',\n            () => store.dispatch(openExampleModal()),\n            mobile_icon: MenuIcon,\n        );\n    }\n\n    uninitialize() {\n        // No clean up required.\n    }\n}\n\nwindow.registerPlugin('myplugin', new PluginClass());\n")),(0,i.kt)("p",null,"This will add a custom ",(0,i.kt)("inlineCode",{parentName:"p"},"UserPopularity")," component to the profile popover, render a custom ",(0,i.kt)("inlineCode",{parentName:"p"},"SomePost")," component for any post with the type ",(0,i.kt)("inlineCode",{parentName:"p"},"custom_somepost"),", and insert a custom main menu item."),(0,i.kt)("h2",{id:"registry"},"Registry"),(0,i.kt)("p",null,"An instance of the plugin registry is passed to each plugin via the ",(0,i.kt)("inlineCode",{parentName:"p"},"initialize")," callback."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"registerObjectHomeComponent(object_name, component)")),(0,i.kt)("h3",{id:"registerobjecthomecomponent"},"registerObjectHomeComponent"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"/**\n    * Register a component that show a dashboard\n*/\nregisterObjectHomeComponent('dashboard', component)\n")),(0,i.kt)("h2",{id:"exported-libraries-and-functions"},"Exported Libraries and Functions"),(0,i.kt)("p",null,"The web app exports a number of libraries and functions on the ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/Web/API/Window"},"window")," object for plugins to use. To avoid bloating your plugin, we recommend depending on these using ",(0,i.kt)("a",{parentName:"p",href:"https://webpack.js.org/configuration/externals/"},"Webpack externals")," or importing them manually from the window. Below is a list of the exposed libraries and functions:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Library"),(0,i.kt)("th",{parentName:"tr",align:null},"Exported Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"react"),(0,i.kt)("td",{parentName:"tr",align:null},"window.React"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://reactjs.org/"},"ReactJS"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"react-dom"),(0,i.kt)("td",{parentName:"tr",align:null},"window.ReactDOM"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://reactjs.org/react-dom.html"},"ReactDOM"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"redux"),(0,i.kt)("td",{parentName:"tr",align:null},"window.Redux"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://redux.js.org/"},"Redux"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"react-redux"),(0,i.kt)("td",{parentName:"tr",align:null},"window.ReactRedux"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/reactjs/react-redux"},"React bindings for Redux"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"prop-types"),(0,i.kt)("td",{parentName:"tr",align:null},"window.PropTypes"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://www.npmjs.com/package/prop-types"},"PropTypes"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"@steedos/react"),(0,i.kt)("td",{parentName:"tr",align:null},"window.ReactSteedos"),(0,i.kt)("td",{parentName:"tr",align:null},"Steedos react components and utility functions")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"@salesforce/design-system-react"),(0,i.kt)("td",{parentName:"tr",align:null},"window.ReactDesignSystem"),(0,i.kt)("td",{parentName:"tr",align:null},"Salesforce react components and utility functions")))),(0,i.kt)("h3",{id:"reactsteedos"},"ReactSteedos"),(0,i.kt)("p",null,"Contains the following utility functions:"),(0,i.kt)("h4",{id:"absoluteurlurl"},"absoluteUrl(url)"),(0,i.kt)("p",null,"\u8fd4\u56de\u7edd\u5bf9\u8def\u5f84"),(0,i.kt)("h4",{id:"usage-example"},"Usage Example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"const React = window.react;\nconst ReactSteedos = window['ReactSteedos']; // import the post utilities\nimport PropTypes from 'prop-types';\n\nexport default class DashboardComponent extends React.PureComponent {\n\n    // ...\n\n    render() {\n\n\n        return (\n            <ReactSteedos.Dashboard/>\n        );\n    }\n}\n")))}d.isMDXComponent=!0}}]);