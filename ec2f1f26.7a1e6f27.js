(window.webpackJsonp=window.webpackJsonp||[]).push([[284],{383:function(t,n,e){"use strict";e.r(n),e.d(n,"frontMatter",(function(){return c})),e.d(n,"metadata",(function(){return s})),e.d(n,"rightToc",(function(){return l})),e.d(n,"default",(function(){return p}));var r=e(1),a=e(6),o=(e(0),e(415)),c={title:"JsReport\u62a5\u8868"},s={id:"developer/report_jsreport",title:"JsReport\u62a5\u8868",description:"Steedos \u4e0e [jsreport](https://github.com/jsreport/jsreport) \u96c6\u6210\uff0c\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528Html\u548cJavascript\u7f16\u5199\u590d\u6742\u6837\u5f0f\u7684\u62a5\u8868\u3002",source:"@site/../docs/developer/report_jsreport.md",permalink:"/developer/report_jsreport",sidebar:"Steedos \u5f00\u53d1\u6587\u6863",previous:{title:"\u7edf\u8ba1\u62a5\u8868",permalink:"/developer/reports"},next:{title:"steedos-config",permalink:"/developer/steedos_config"}},l=[{value:"\u62a5\u8868\u67e5\u770b\u754c\u9762",id:"\u62a5\u8868\u67e5\u770b\u754c\u9762",children:[{value:"\u6570\u636e\u6743\u9650",id:"\u6570\u636e\u6743\u9650",children:[]},{value:"\u6570\u636e\u7b5b\u9009",id:"\u6570\u636e\u7b5b\u9009",children:[]}]},{value:"\u62a5\u8868\u8bbe\u8ba1\u5de5\u5177",id:"\u62a5\u8868\u8bbe\u8ba1\u5de5\u5177",children:[]},{value:"\u62a5\u8868\u53c2\u6570",id:"\u62a5\u8868\u53c2\u6570",children:[{value:"\u62a5\u8868\u540d\u79f0 name",id:"\u62a5\u8868\u540d\u79f0-name",children:[]},{value:"\u62a5\u8868\u6570\u636e\u6e90 data_source",id:"\u62a5\u8868\u6570\u636e\u6e90-data_source",children:[]},{value:"\u5bf9\u8c61\u540d object_name",id:"\u5bf9\u8c61\u540d-object_name",children:[]},{value:"\u5b57\u6bb5 fields",id:"\u5b57\u6bb5-fields",children:[]},{value:"\u67e5\u8be2\u6761\u4ef6 filters",id:"\u67e5\u8be2\u6761\u4ef6-filters",children:[]}]},{value:"\u62a5\u8868\u663e\u793a\u6a21\u7248",id:"\u62a5\u8868\u663e\u793a\u6a21\u7248",children:[]},{value:"\u62a5\u8868\u811a\u672c",id:"\u62a5\u8868\u811a\u672c",children:[]}],d={rightToc:l};function p(t){var n=t.components,e=Object(a.a)(t,["components"]);return Object(o.b)("wrapper",Object(r.a)({},d,e,{components:n,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Steedos \u4e0e ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/jsreport/jsreport"}),"jsreport")," \u96c6\u6210\uff0c\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528Html\u548cJavascript\u7f16\u5199\u590d\u6742\u6837\u5f0f\u7684\u62a5\u8868\u3002"),Object(o.b)("h2",{id:"\u62a5\u8868\u67e5\u770b\u754c\u9762"},"\u62a5\u8868\u67e5\u770b\u754c\u9762"),Object(o.b)("p",null,"\u4e1a\u52a1\u4eba\u5458\u5728\u62a5\u8868\u6a21\u5757\u4e2d\u9009\u4e2d\u5bf9\u5e94\u7684\u62a5\u8868\uff0c\u5373\u53ef\u8fdb\u5165\u62a5\u8868\u67e5\u770b\u754c\u9762\u3002"),Object(o.b)("p",null,Object(o.b)("img",Object(r.a)({parentName:"p"},{src:"/assets/jsreport_sample.png#bordered",alt:"\u5408\u540c\u7edf\u8ba1\u5206\u6790\u62a5\u8868"}))),Object(o.b)("h3",{id:"\u6570\u636e\u6743\u9650"},"\u6570\u636e\u6743\u9650"),Object(o.b)("p",null,"Steedos\u4e2d\u7684\u62a5\u8868\u6570\u636e\u5747\u901a\u8fc7\u7edf\u4e00\u7684OData\u63a5\u53e3\u4f20\u9012\u7ed9\u62a5\u8868\u670d\u52a1\u5668\uff0c\u81ea\u52a8\u52a0\u4e0a\u6743\u9650\u8fc7\u6ee4\u7684\u529f\u80fd\uff0c\u62a5\u8868\u4e2d\u53ea\u4f1a\u663e\u793a\u5f53\u524d\u7528\u6237\u88ab\u6388\u6743\u8bbf\u95ee\u7684\u6570\u636e\u3002"),Object(o.b)("h3",{id:"\u6570\u636e\u7b5b\u9009"},"\u6570\u636e\u7b5b\u9009"),Object(o.b)("p",null,"\u5982\u679c\u9700\u8981\u8fdb\u884c\u660e\u7ec6\u7edf\u8ba1\uff0c\u4e1a\u52a1\u4eba\u5458\u8fd8\u53ef\u4ee5\u501f\u52a9Steedos\u7684\u7b5b\u9009\u5668\u529f\u80fd\uff0c\u5bf9\u7edf\u8ba1\u6570\u636e\u8fdb\u884c\u8fdb\u4e00\u6b65\u7b5b\u9009\uff0c\u5e76\u67e5\u770b\u7b5b\u9009\u4e4b\u540e\u7684\u7edf\u8ba1\u62a5\u8868\u3002"),Object(o.b)("h2",{id:"\u62a5\u8868\u8bbe\u8ba1\u5de5\u5177"},"\u62a5\u8868\u8bbe\u8ba1\u5de5\u5177"),Object(o.b)("p",null,"\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528\u62a5\u8868\u8bbe\u8ba1\u5de5\u5177\uff0c\u7f16\u8f91\u6a21\u62df\u6570\u636e\uff0c\u8c03\u6574\u62a5\u8868\u6837\u5f0f\uff0c\u5e76\u5b9e\u65f6\u9884\u89c8\u62a5\u8868\u7684\u663e\u793a\u6548\u679c\u3002"),Object(o.b)("p",null,Object(o.b)("img",Object(r.a)({parentName:"p"},{src:"/assets/jsreport_studio.png#bordered",alt:"jsreport\u62a5\u8868\u8bbe\u8ba1\u5de5\u5177"}))),Object(o.b)("h2",{id:"\u62a5\u8868\u53c2\u6570"},"\u62a5\u8868\u53c2\u6570"),Object(o.b)("h3",{id:"\u62a5\u8868\u540d\u79f0-name"},"\u62a5\u8868\u540d\u79f0 name"),Object(o.b)("p",null,"\u62a5\u8868\u7684\u663e\u793a\u540d\u79f0"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"name: \u5408\u540c\u5e74\u5ea6\u7edf\u8ba1\u8868\n")),Object(o.b)("h3",{id:"\u62a5\u8868\u6570\u636e\u6e90-data_source"},"\u62a5\u8868\u6570\u636e\u6e90 data_source"),Object(o.b)("p",null,"\u76ee\u524d\u53ea\u80fd\u4f7f\u7528OData\u4f5c\u4e3a\u62a5\u8868\u6570\u636e\u6e90\u3002"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"data_source: odata\n")),Object(o.b)("h3",{id:"\u5bf9\u8c61\u540d-object_name"},"\u5bf9\u8c61\u540d object_name"),Object(o.b)("p",null,"\u5b9a\u4e49\u62a5\u8868\u9700\u8981\u67e5\u8be2\u7684\u4e3b\u5bf9\u8c61\u540d\u3002"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"object_name: contracts\n")),Object(o.b)("h3",{id:"\u5b57\u6bb5-fields"},"\u5b57\u6bb5 fields"),Object(o.b)("p",null,"\u5b9a\u4e49\u62a5\u8868\u9700\u8981\u67e5\u8be2\u7684\u5b57\u6bb5\u3002"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"fields:\n  - name\n  - amount\n  - contract_type\n")),Object(o.b)("h3",{id:"\u67e5\u8be2\u6761\u4ef6-filters"},"\u67e5\u8be2\u6761\u4ef6 filters"),Object(o.b)("p",null,"\u5b9a\u4e49\u4f7f\u7528OData\u67e5\u8be2\u62a5\u8868\u6570\u636e\u7684\u8fc7\u6ee4\u6761\u4ef6\u3002"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),'filters: ["contract_type", "=", "\u6280\u672f\u5408\u540c"]\n')),Object(o.b)("h2",{id:"\u62a5\u8868\u663e\u793a\u6a21\u7248"},"\u62a5\u8868\u663e\u793a\u6a21\u7248"),Object(o.b)("p",null,"\u4f7f\u7528Html\u6587\u4ef6\uff0c\u7f16\u5199\u62a5\u8868\u7684\u6392\u7248\u6837\u5f0f\u3002\u6a21\u7248\u5bf9\u5e94\u7684\u540e\u7f00\u540d\u4e3a .report.html"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-handlebars"}),"<body>\n    <div>\n        <table class='table table-border row-border cell-border cell-hover striped'>\n            <thead>\n                <tr class=\"heading\">\n                    <th colspan=\"13\">\n                        \u5408\u540c\u7edf\u8ba1\u62a5\u8868\n                    </th>\n                </tr>\n                <tr class=\"headtop\">\n                    <th colspan=\"13\" class=\"text-left\">\n                        <span class=\"col-1\">\n                            \u586b\u62a5\u5355\u4f4d\uff1a\u80a1\u4efd\u673a\u5173\n                        </span>\n                        <span class=\"col-2\">\n                            \u586b\u62a5\u5355\u4f4d\u8d1f\u8d23\u4eba\uff1a\n                        </span>\n                        <span class=\"float-right col-3\">\n                            \u5355\u4f4d\uff1a\u4e07\u5143\n                        </span>\n                    </th>\n                </tr>\n                <tr>\n                    <th rowspan=\"3\">\n                        \u5e8f\u53f7\n                    </th>\n                    <th rowspan=\"3\">\n                        \u5408\u540c\u79cd\u7c7b\n                    </th>\n                    <th colspan=\"4\">\n                        \u6b63\u5e38\u5c65\u884c\u7684\u5408\u540c\n                    </th>\n                    <th colspan=\"5\">\n                        \u5c65\u884c\u4e0d\u6b63\u5e38\u7684\u5408\u540c\n                    </th>\n                    <th colspan=\"2\" rowspan=\"2\">\n                        \u5176\u4e2d\uff1a\u5173\u8054\u4ea4\u6613\u5408\u540c\n                    </th>\n                </tr>\n                <tr>\n                    <th colspan=\"2\">\n                        \u5df2\u5c65\u884c\u7684\u5408\u540c\n                    </th>\n                    <th colspan=\"2\">\n                        \u5c1a\u5728\u5c65\u884c\u7684\u5408\u540c\n                    </th>\n                    <th colspan=\"3\">\n                        \u8fdd\u7ea6\u4f46\u7ee7\u7eed\u5c65\u884c\u7684\u5408\u540c\n                    </th>\n                    <th colspan=\"2\">\n                        \u89e3\u9664\u7684\u5408\u540c\n                    </th>\n                </tr>\n                <tr>\n                    <td>\n                        \u4efd\u6570\n                    </td>\n                    <td>\n                        \u91d1\u989d\n                    </td>\n                    <td>\n                        \u4efd\u6570\n                    </td>\n                    <td>\n                        \u91d1\u989d\n                    </td>\n                    <td>\n                        \u4efd\u6570\n                    </td>\n                    <td>\n                        \u91d1\u989d\n                    </td>\n                    <th>\n                        \u8fdd\u7ea6\u65b9\n                    </th>\n                    <td>\n                        \u4efd\u6570\n                    </td>\n                    <td>\n                        \u91d1\u989d\n                    </td>\n                    <td>\n                        \u4efd\u6570\n                    </td>\n                    <td>\n                        \u91d1\u989d\n                    </td>\n                </tr>\n            </thead>\n            <tbody>\n                {{#each contractTypes}}\n                    <tr>\n                        <th>\n                            {{rowIndex @index}}\n                        </th>\n                        <th>\n                            {{name}}\n                        </th>\n                        <td>\n                            {{computeContractTypeTagCount _id 'finished' ../result}}\n                        </td>\n                        <td>\n                            {{computeContractTypeTagSum _id 'finished' ../result}}\n                        </td>\n                        <td>\n                            {{computeContractTypeTagCount _id 'pending' ../result}}\n                        </td>\n                        <td>\n                            {{computeContractTypeTagSum _id 'pending' ../result}}\n                        </td>\n                        <td>\n                            {{computeContractTypeTagCount _id 'continue' ../result}}\n                        </td>\n                        <td>\n                            {{computeContractTypeTagSum _id 'continue' ../result}}\n                        </td>\n                        <td>\n                        </td>\n                        <td>\n                            {{computeContractTypeTagCount _id 'cancel' ../result}}\n                        </td>\n                        <td>\n                            {{computeContractTypeTagSum _id 'cancel' ../result}}\n                        </td>\n                        <td>\n                            {{computeContractTypeTagCount _id 'connected' ../result}}\n                        </td>\n                        <td>\n                            {{computeContractTypeTagSum _id 'connected' ../result}}\n                        </td>\n                    </tr>\n                {{/each}}\n            </tbody>\n            <tfoot>\n                <tr class=\"footer\">\n                    <th colspan=\"2\">\n                        \u5408\u8ba1\n                    </th>\n                    <td>\n                        {{computeContractTypesTagTotalCount contractTypes 'finished' result}}\n                    </td>\n                    <td>\n                        {{computeContractTypesTagTotalSum contractTypes 'finished' result}}\n                    </td>\n                    <td>\n                        {{computeContractTypesTagTotalCount contractTypes 'pending' result}}\n                    </td>\n                    <td>\n                        {{computeContractTypesTagTotalSum contractTypes 'pending' result}}\n                    </td>\n                    <td>\n                        {{computeContractTypesTagTotalCount contractTypes 'continue' result}}\n                    </td>\n                    <td>\n                        {{computeContractTypesTagTotalSum contractTypes 'continue' result}}\n                    </td>\n                    <td>\n                    </td>\n                    <td>\n                        {{computeContractTypesTagTotalCount contractTypes 'cancel' result}}\n                    </td>\n                    <td>\n                        {{computeContractTypesTagTotalSum contractTypes 'cancel' result}}\n                    </td>\n                    <td>\n                        {{computeContractTypesTagTotalCount contractTypes 'connected' result}}\n                    </td>\n                    <td>\n                        {{computeContractTypesTagTotalSum contractTypes 'connected' result}}\n                    </td>\n                </tr>\n            </tfoot>\n        </table>\n    </div>\n    <div>\n        <div>1. \u91cd\u5927\u5408\u540c{{computeTotalTagCount 'important' result}}\u4efd\uff0c\u6807\u7684\u91d1\u989d{{computeTotalTagSum 'important' result}}\u4e07\u5143</div>\n        <div>2. \u62db\u6807\u5408\u540c{{computeTotalTagCount 'bidding' result}}\u4efd\uff0c\u6807\u7684\u91d1\u989d{{computeTotalTagSum 'bidding' result}}\u4e07\u5143</div>\n        <div>3. \u56fa\u5b9a\u8d44\u4ea7\u5408\u540c{{computeTotalTagCount 'solid_investment' result}}\u4efd\uff0c\u6807\u7684\u91d1\u989d{{computeTotalTagSum 'solid_investment' result}}\u4e07\u5143</div>\n        <div>4. \u603b\u5408\u540c{{computeTotalCount 'solid_investment' result}}\u4efd\uff0c\u6807\u7684\u91d1\u989d{{computeTotalSum 'solid_investment' result}}\u4e07\u5143</div>\n    </div>\n</body>\n")),Object(o.b)("h2",{id:"\u62a5\u8868\u811a\u672c"},"\u62a5\u8868\u811a\u672c"),Object(o.b)("p",null,"\u4f7f\u7528Javascript\u5b9a\u4e49\u62a5\u8868\u4e2d\u7528\u5230\u7684\u5e2e\u52a9\u51fd\u6570\u3002\u5e2e\u52a9\u811a\u672c\u5bf9\u5e94\u7684\u540e\u7f00\u540d\u4e3a  .helper.js"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),'//\u5b9a\u4e49\u4e00\u4e2a\u52a0\u6cd5\u51fd\u6570\uff0c\u4ee5\u89e3\u51b3\u91d1\u989d\u76f8\u52a0\u7cbe\u5ea6\u95ee\u9898\nfunction add(){\n    var args = arguments,//\u83b7\u53d6\u6240\u6709\u7684\u53c2\u6570\n        lens = args.length,//\u83b7\u53d6\u53c2\u6570\u7684\u957f\u5ea6\n        d = 0,//\u5b9a\u4e49\u5c0f\u6570\u4f4d\u7684\u521d\u59cb\u957f\u5ea6\uff0c\u9ed8\u8ba4\u4e3a\u6574\u6570\uff0c\u5373\u5c0f\u6570\u4f4d\u4e3a0\n        sum = 0;//\u5b9a\u4e49sum\u6765\u63a5\u6536\u6240\u6709\u6570\u636e\u7684\u548c\n    //\u5faa\u73af\u6240\u6709\u7684\u53c2\u6570\n    for(var key in args){//\u904d\u5386\u6240\u6709\u7684\u53c2\u6570\n        //\u628a\u6570\u5b57\u8f6c\u4e3a\u5b57\u7b26\u4e32\n        var str = ""+args[key];\n        if(str.indexOf(".")!=-1){//\u5224\u65ad\u6570\u5b57\u662f\u5426\u4e3a\u5c0f\u6570\n            //\u83b7\u53d6\u5c0f\u6570\u4f4d\u7684\u957f\u5ea6\n            var temp = str.split(".")[1].length;\n            //\u6bd4\u8f83\u6b64\u6570\u7684\u5c0f\u6570\u4f4d\u4e0e\u539f\u5c0f\u6570\u4f4d\u7684\u957f\u5ea6\uff0c\u53d6\u5c0f\u6570\u4f4d\u8f83\u957f\u7684\u5b58\u50a8\u5230d\u4e2d\n            d = d < temp ? temp : d;\n        }\n    }\n    //\u8ba1\u7b97\u9700\u8981\u4e58\u7684\u6570\u503c\n    var m = Math.pow(10,d);\n    //\u904d\u5386\u6240\u6709\u53c2\u6570\u5e76\u76f8\u52a0\n    for(var key1 in args){\n        sum += args[key1]*m;\n    }\n    //\u8fd4\u56de\u7ed3\u679c\n    return sum/m;\n}\n\nfunction deci(num, v) {\n    /*\n        \u5341\u8fdb\u5236\u6d6e\u70b9\u6570\u8f6c\u6362\uff0c\n        num\u8868\u793a\u8981\u56db\u820d\u4e94\u5165\u7684\u6570\uff0c\n        v\u8868\u793a\u8981\u4fdd\u7559\u7684\u5c0f\u6570\u4f4d\u6570\u3002\n    */\n    var vv = Math.pow(10, v);\n    return Math.round(num * vv) / vv;\n}\n\n// getContractTypes\u4e2d\u6392\u5b83\u6027\u7684id\u503c\uff0c\u8be5\u5206\u7c7b\u6307\u5176\u4ed6\u5206\u7c7b\u4ee5\u5916\u7684\u6240\u6709\u5206\u7c7b\nvar otherContractTypeId = "--other--";\n\nfunction getContractTypes() {\n    return [{\n            "_id": "7CbxwqzjkkHrtFNeH",\n            "name": "\u79df\u8d41\u5408\u540c"\n    },{\n            "_id": "c3mTcfHGZ3nCRmyzq",\n            "name": "\u627f\u63fd\u5408\u540c"\n    },{\n            "_id": "GrKZCAPHYm5v5gLqh",\n            "name": "\u5efa\u8bbe\u5de5\u7a0b\u5408\u540c"\n    },{\n            "_id": "ntpWE3a27Mm64YApM",\n            "name": "\u6280\u672f\u5408\u540c"\n    },{\n            "_id": "z32TeRg5ZpkSNzdyc",\n            "name": "\u4e70\u5356\u5408\u540c"\n    },{\n            "_id": "EFgyJM52j5MLgY3pt",\n            "name": "\u52b3\u52a1\u5408\u540c"\n    },{\n            "_id": "ngLXGLJAKsxHGbKNo",\n            "name": "\u6e2f\u53e3\u4f5c\u4e1a\u5408\u540c"\n    },{\n            "_id": otherContractTypeId,\n            "name": "\u5176\u4ed6\u5408\u540c"\n    }]\n}\n\nfunction getContractTags() {\n    return [{\n            "name": "\u5df2\u5c65\u884c\u7684\u5408\u540c",\n            "key": "finished",\n            "property": "contract_state",\n            "value": "\u5b8c\u6bd5"\n    },{\n            "name": "\u5c1a\u5728\u5c65\u884c\u7684\u5408\u540c",\n            "key": "pending",\n            "property": "contract_state",\n            "value": "\u8fdb\u884c\u4e2d"\n    },{\n            "name": "\u8fdd\u7ea6\u4f46\u7ee7\u7eed\u5c65\u884c\u7684\u5408\u540c",\n            "key": "continue",\n            "property": "contract_state",\n            "value": "\u8fdd\u7ea6\u4f46\u7ee7\u7eed\u5c65\u884c"\n    },{\n            "name": "\u89e3\u9664\u7684\u5408\u540c",\n            "key": "cancel",\n            "property": "contract_state",\n            "value": "\u89e3\u9664"\n    },{\n            "name": "\u5173\u8054\u4ea4\u6613\u5408\u540c",\n            "key": "connected",\n            "property": "is_connected_transaction",\n            "value": "\u662f"\n    }]\n}\n\nfunction geTotalTags() {\n    return [{\n            "name": "\u91cd\u5927\u5408\u540c",\n            "key": "important",\n            "property": "is_important",\n            "value": "\u662f"\n    },{\n            "name": "\u62db\u6807\u5408\u540c",\n            "key": "bidding",\n            "property": "is_bidding",\n            "value": "\u662f"\n    },{\n            "name": "\u56fa\u5b9a\u8d44\u4ea7\u5408\u540c",\n            "key": "solid_investment",\n            "property": "is_solid_investment",\n            "value": "\u662f"\n    }]\n}\n\nfunction beforeRender(req, res, done) { \n    var contractTypes = getContractTypes();\n    var contracts = req.data.contracts;\n    let result = {};\n    var contractTags = getContractTags();\n    result.contractTypes = {};\n    contractTypes.forEach(function(item){\n        result.contractTypes[item._id] = {\n            name: item.name\n        }\n        result.contractTypes[item._id].tags = {};\n        contractTags.forEach(function(tagItem){\n            result.contractTypes[item._id].tags[tagItem.key] = {\n                name: tagItem.name,\n                count: 0,\n                sum: 0\n            }\n        });\n    });\n    var totalTags = geTotalTags();\n    result.tags = {};\n    totalTags.forEach(function(tagItem){\n        result.tags[tagItem.key] = {\n            name: tagItem.name,\n            count: 0,\n            sum: 0\n        }\n    });\n    result.total =  {\n        name: "\u603b\u5408\u540c",\n        count: 0,\n        sum: 0\n    }\n\n    contracts.forEach(function(record){\n        result.total.count++;\n        result.total.sum = add(result.total.sum, record.amount);\n        totalTags.forEach(function(tagItem){\n            if(record[tagItem.property] === tagItem.value){\n                result.tags[tagItem.key].count++;\n                result.tags[tagItem.key].sum = add(result.tags[tagItem.key].sum, record.amount);\n            }\n        });\n        var recordContractType = record.contract_type;\n        if(recordContractType){\n            var resultContractType = result.contractTypes[recordContractType._id];\n            if(!resultContractType){\n                resultContractType = result.contractTypes[otherContractTypeId];\n            }\n            contractTags.forEach(function(tagItem){\n                if(record[tagItem.property] === tagItem.value){\n                    resultContractType.tags[tagItem.key].count++;\n                    resultContractType.tags[tagItem.key].sum = add(resultContractType.tags[tagItem.key].sum, record.amount);\n                }\n            });\n        }\n    });\n    req.data = Object.assign({}, req.data, {\n        report_name: "\u6d4b\u8bd5\u5408\u540c",\n        contractTypes: contractTypes,\n        result: result\n    });\n    delete req.data.contracts;\n    done(); \n}\n')))}p.isMDXComponent=!0},415:function(t,n,e){"use strict";e.d(n,"a",(function(){return u})),e.d(n,"b",(function(){return b}));var r=e(0),a=e.n(r);function o(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function c(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function s(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?c(Object(e),!0).forEach((function(n){o(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function l(t,n){if(null==t)return{};var e,r,a=function(t,n){if(null==t)return{};var e,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)e=o[r],n.indexOf(e)>=0||(a[e]=t[e]);return a}(t,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)e=o[r],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(a[e]=t[e])}return a}var d=a.a.createContext({}),p=function(t){var n=a.a.useContext(d),e=n;return t&&(e="function"==typeof t?t(n):s({},n,{},t)),e},u=function(t){var n=p(t.components);return a.a.createElement(d.Provider,{value:n},t.children)},i={inlineCode:"code",wrapper:function(t){var n=t.children;return a.a.createElement(a.a.Fragment,{},n)}},m=Object(r.forwardRef)((function(t,n){var e=t.components,r=t.mdxType,o=t.originalType,c=t.parentName,d=l(t,["components","mdxType","originalType","parentName"]),u=p(e),m=r,b=u["".concat(c,".").concat(m)]||u[m]||i[m]||o;return e?a.a.createElement(b,s({ref:n},d,{components:e})):a.a.createElement(b,s({ref:n},d))}));function b(t,n){var e=arguments,r=n&&n.mdxType;if("string"==typeof t||r){var o=e.length,c=new Array(o);c[0]=m;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=t,s.mdxType="string"==typeof t?t:r,c[1]=s;for(var d=2;d<o;d++)c[d]=e[d];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,e)}m.displayName="MDXCreateElement"}}]);