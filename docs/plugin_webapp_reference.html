<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Web App Reference · 华炎开发</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## PluginClass"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Web App Reference · 华炎开发"/><meta property="og:type" content="website"/><meta property="og:url" content="https://steedos.github.io//"/><meta property="og:description" content="## PluginClass"/><meta property="og:image" content="https://steedos.github.io/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://steedos.github.io/img/docusaurus.png"/><link rel="shortcut icon" href="/img/icon_blue.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/icon_blue.png" alt="华炎开发"/><h2 class="headerTitleWithLogo">华炎开发</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/overview" target="_self">特色</a></li><li class=""><a href="/docs/getting_started" target="_self">文档</a></li><li class=""><a href="/docs/projects" target="_self">案例</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/steedos/object-server/edit/develop/docs/plugin_webapp_reference.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Web App Reference</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="pluginclass"></a><a href="#pluginclass" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PluginClass</h2>
<p>The PluginClass interface defines two methods used by the Steedos web app to <code>initialize</code> and <code>uninitialize</code> your plugin:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PluginClass</span> </span>{
    <span class="hljs-comment">/**
    * initialize is called by the webapp when the plugin is first loaded.
    * Receives the following:
    * - registry - an instance of the registry tied to your plugin id
    * - store - the Redux store of the web app.
    */</span>
    initialize(registry, store)

    <span class="hljs-comment">/**
    * uninitialize is called by the webapp if your plugin is uninstalled
    */</span>
    uninitialize()
}
</code></pre>
<p>Your plugin should implement this class and register it using the global <code>registerPlugin</code> method defined on the window by the webapp:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-built_in">window</span>.registerPlugin(<span class="hljs-string">'myplugin'</span>, <span class="hljs-keyword">new</span> PluginClass());
</code></pre>
<p>Use the provided <a href="#registry">registry</a> to register components, post type overrides and callbacks. Use the store to access the global state of the web app, but note that you should use the registry to register any custom reducers your plugin might require.</p>
<h3><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>The entry point <code>index.js</code> of your application might contain:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> UserPopularity <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/profile_popover/user_popularity'</span>;
<span class="hljs-keyword">import</span> SomePost <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/some_post'</span>;
<span class="hljs-keyword">import</span> MenuIcon <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/menu_icon'</span>;
<span class="hljs-keyword">import</span> {openExampleModal} <span class="hljs-keyword">from</span> <span class="hljs-string">'./actions'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PluginClass</span> </span>{
    initialize(registry, store) {
        registry.registerPopoverUserAttributesComponent(
            UserPopularity,
        );
        registry.registerPostTypeComponent(
            <span class="hljs-string">'custom_somepost'</span>,
            SomePost,
        );
        registry.registerMainMenuAction(
            <span class="hljs-string">'Plugin Menu Item'</span>,
            () =&gt; store.dispatch(openExampleModal()),
            <span class="hljs-attr">mobile_icon</span>: MenuIcon,
        );
    }

    uninitialize() {
        <span class="hljs-comment">// No clean up required.</span>
    }
}

<span class="hljs-built_in">window</span>.registerPlugin(<span class="hljs-string">'myplugin'</span>, <span class="hljs-keyword">new</span> PluginClass());
</code></pre>
<p>This will add a custom <code>UserPopularity</code> component to the profile popover, render a custom <code>SomePost</code> component for any post with the type <code>custom_somepost</code>, and insert a custom main menu item.</p>
<h2><a class="anchor" aria-hidden="true" id="registry"></a><a href="#registry" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Registry</h2>
<p>An instance of the plugin registry is passed to each plugin via the <code>initialize</code> callback.</p>
<ul>
<li>registerObjectHomeComponent(object_name, component)</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="registerobjecthomecomponent"></a><a href="#registerobjecthomecomponent" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>registerObjectHomeComponent</h3>
<pre><code class="hljs css language-js"><span class="hljs-comment">/**
    * Register a component that show a dashboard
*/</span>
registerObjectHomeComponent(<span class="hljs-string">'dashboard'</span>, component)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="exported-libraries-and-functions"></a><a href="#exported-libraries-and-functions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exported Libraries and Functions</h2>
<p>The web app exports a number of libraries and functions on the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window">window</a> object for plugins to use. To avoid bloating your plugin, we recommend depending on these using <a href="https://webpack.js.org/configuration/externals/">Webpack externals</a> or importing them manually from the window. Below is a list of the exposed libraries and functions:</p>
<table>
<thead>
<tr><th>Library</th><th>Exported Name</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>react</td><td>window.React</td><td><a href="https://reactjs.org/">ReactJS</a></td></tr>
<tr><td>react-dom</td><td>window.ReactDOM</td><td><a href="https://reactjs.org/docs/react-dom.html">ReactDOM</a></td></tr>
<tr><td>redux</td><td>window.Redux</td><td><a href="https://redux.js.org/">Redux</a></td></tr>
<tr><td>react-redux</td><td>window.ReactRedux</td><td><a href="https://github.com/reactjs/react-redux">React bindings for Redux</a></td></tr>
<tr><td>prop-types</td><td>window.PropTypes</td><td><a href="https://www.npmjs.com/package/prop-types">PropTypes</a></td></tr>
<tr><td>@steedos/react</td><td>window.ReactSteedos</td><td>Steedos react components and utility functions</td></tr>
<tr><td>@salesforce/design-system-react</td><td>window.ReactDesignSystem</td><td>Salesforce react components and utility functions</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="reactsteedos"></a><a href="#reactsteedos" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ReactSteedos</h3>
<p>Contains the following utility functions:</p>
<h4><a class="anchor" aria-hidden="true" id="absoluteurlurl"></a><a href="#absoluteurlurl" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>absoluteUrl(url)</h4>
<p>返回绝对路径</p>
<h4><a class="anchor" aria-hidden="true" id="usage-example"></a><a href="#usage-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Usage Example</h4>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> React = <span class="hljs-built_in">window</span>.react;
<span class="hljs-keyword">const</span> ReactSteedos = <span class="hljs-built_in">window</span>[<span class="hljs-string">'ReactSteedos'</span>]; <span class="hljs-comment">// import the post utilities</span>
<span class="hljs-keyword">import</span> PropTypes <span class="hljs-keyword">from</span> <span class="hljs-string">'prop-types'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DashboardComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">PureComponent</span> </span>{

    <span class="hljs-comment">// ...</span>

    render() {


        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ReactSteedos.Dashboard</span>/&gt;</span></span>
        );
    }
}
</code></pre>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2019-11-2 by Jack Zhuang</em></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#pluginclass">PluginClass</a><ul class="toc-headings"><li><a href="#example">Example</a></li></ul></li><li><a href="#registry">Registry</a><ul class="toc-headings"><li><a href="#registerobjecthomecomponent">registerObjectHomeComponent</a></li></ul></li><li><a href="#exported-libraries-and-functions">Exported Libraries and Functions</a><ul class="toc-headings"><li><a href="#reactsteedos">ReactSteedos</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/icon_blue.png" alt="华炎开发" width="66" height="58"/></a><div><h5>Steedos “低代码”开发平台</h5><a href="/docs/en/overview">什么是“低代码”开发平台？</a><a href="/docs/en/getting_started">快速向导</a><a href="https://www-steedos-com.oss-cn-beijing.aliyuncs.com/videos/creator/contracts-demo.mp4" target="_blank">视频演示</a></div><div><h5>案例</h5><a href="https://github.com/steedos/steedos-contracts-app" target="_blank">合同管理</a><a href="https://github.com/steedos/steedos-meeting-app" target="_blank">会议管理</a><a href="https://github.com/steedos/steedos-records-app" target="_blank">档案管理</a></div><div><h5>更多</h5><a href="tel:4008201612">商务热线：400-820-1612</a><a href="/docs/assets/support_qq.jpg" target="_blank" rel="noreferrer noopener">技术支持QQ群：797469729</a><a href="https://github.com/steedos/object-server">GitHub</a><a class="github-button" href="https://github.com/steedos/object-server" data-icon="octicon-star" data-count-href="/steedos/object-server/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 上海华炎软件科技有限公司</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'eaa8e1c86ac084b5cac664d9d996856c',
                indexName: 'steedos',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>