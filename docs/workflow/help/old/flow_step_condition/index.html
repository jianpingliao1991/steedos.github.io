<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">flow_step_condition</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="高效协同，赋能员工新体验 · 帮助企业集成所有业务流程，将实时数据转化为行动，并提高员工的工作效率。"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="### 条件节点"><meta data-react-helmet="true" property="og:description" content="### 条件节点"><meta data-react-helmet="true" property="og:url" content="https://www.steedos.com//docs/workflow/help/old/flow_step_condition">

<link data-react-helmet="true" rel="shortcut icon" href="/img/icon_blue.png">


<link rel="stylesheet" href="/styles.d0025817.css">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}function e(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}var n=window.matchMedia("(prefers-color-scheme: dark)");n.addListener((function(n){null===e()&&t(n.matches?"dark":"")}));var a=e();null!==a?t(a):n.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/icon_blue.png" alt="华炎"><strong>华炎</strong></a><a class="navbar__item navbar__link" href="/docs/workflow/index">业务审批</a><a class="navbar__item navbar__link" href="/docs/platform/index">业务数据</a><a class="navbar__item navbar__link" href="/docs/developer/index">开发文档</a><a class="navbar__item navbar__link" href="/blog">动态</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://messenger.steedos.cn/">社区</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="#url">客户登录</a><ul class="dropdown__menu"><li><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://cn.steedos.com">中国区域</a></li><li><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://us.steedos.com">美国区域</a></li></ul></div><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_16CL"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/icon_blue.png" alt="华炎"><strong>华炎</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/workflow/index">业务审批</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/platform/index">业务数据</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/developer/index">开发文档</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">动态</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://messenger.steedos.cn/">社区</a></li><li class="menu__list-item"><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="#url">客户登录</a><ul class="dropdown__menu"><li><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://cn.steedos.com">中国区域</a></li><li><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://us.steedos.com">美国区域</a></li></ul></div></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">flow_step_condition</h1></header><div class="markdown"><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="条件节点"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#条件节点" title="Direct link to heading">#</a>条件节点</h3><p>审批王里的条件节点的目标是智能选择审批路径。</p><p>如费用报销流程中，根据报销金额的不同，审批步骤/审批人也会有所不同，判断规则是报销金额是否大于10000，如果是的话，申请单提交给总经理审批后再交给财务经理，如果不是的话，申请单直接交给财务经理审批即可。</p><p>这里的“报销金额判断”就是一个典型的“条件”节点。条件公式为：{报销金额合计}&gt;=10000 和 {报销金额合计}&lt;10000，两个公式分别连线到“总经理审批”节点和“财务经理”审批节点。</p><p>这样，当用户提交申请单后，系统会根据本次申请的实际金额作判断，决定下一步执行“总经理审批”还是是“财务经理审批”。 </p><ul><li><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="条件节点注意事项："></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#条件节点注意事项：" title="Direct link to heading">#</a>条件节点注意事项：</h4></li><li><p>所有的条件分支不能相互重叠。如上例，假设两个条件分支为“报销金额合计&gt;=10000”和“报销金额合计&lt;＝10000”，则重叠了金额为10000的情况，如果“报销金额合计＝10000”，则系统无法判断走分支1还是分支2。</p></li><li><p>条件分支应能涵盖所有的情况。如上例，假设两个条件分支为“报销金额合计&gt;10000”和“报销金额合计&lt;10000”，则遗漏了金额为10000的情况，如果“报销金额合计＝10000”，则系统也无法判断走分支1还是分支2。</p></li><li><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="设置上述条件节点的具体步骤如下："></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#设置上述条件节点的具体步骤如下：" title="Direct link to heading">#</a>设置上述条件节点的具体步骤如下：</h4></li><li><p>添加条件步骤。拖动属性面板画图设置的的“条件”至左侧界面。</p></li><li><p>在条件节点的属性区域对条件步骤命名，这里将其命名为“报销金额合计是否大于10000”。</p></li><li><p>左侧点击提交节点右上角的“+”，添加两根连线。</p></li><li><p>编辑连线一的条件。左侧点击连线一，右侧的属性区域下，设置连线名称与连线条件。这里设置连线条件为“{报销金额合计}&gt;=10000”。具体为什么要这么设置条件，请参考“流程条件的编写规则”。</p></li><li><p>编辑另一条连线条件。设置连线条件为“{采购金额合计}&lt;10000”。 具体为什么要这么设置条件，请参考“流程条件的编写规则”。</p></li><li><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="条件编写有以下基本规则："></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#条件编写有以下基本规则：" title="Direct link to heading">#</a>条件编写有以下基本规则：</h4></li><li><p>条件中引用字段需使用字段名+{}，如：{请假天数}；</p></li><li><p>条件中使用的符号必须是半角符号；</p></li><li><p>条件中嵌套条件时，用()；</p></li><li><p>条件中可以使用公式和函数。</p></li><li><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="条件中的判断项目，包括："></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#条件中的判断项目，包括：" title="Direct link to heading">#</a>条件中的判断项目，包括：</h4></li><li><p>数值类型常量：直接使用数值，如：1000</p></li><li><p>字符类型常量：使用“&quot;”(注意是半角)将字符串扩起来，如：&quot;北京&quot;</p></li><li><p>表单字段变量：使用“{”和“}” (注意都是半角)将字段名扩起来，如：{请假天数}</p></li><li><p>基于提交人的系统变量：包括姓名、角色、部门等</p></li><li><p>提交人的所在部门（全路径）： {applicant.organization.fullname}</p></li><li><p>提交人的所在部门（最底层部门名）： {applicant.organization.name}</p></li><li><p>提交人的角色名： {applicant.roles} </p></li><li><p>提交人的姓名：{applicant.name} </p></li><li><p>基于姓名表单字段的系统变量：包括姓名、角色、部门等</p><p>  “报销人”的所在部门（全路径）： {报销人}.organization.fullname </p><p>  “报销人”的所在部门（最底层部门名）： {报销人}.organization.name </p><p>  “报销人”的角色名： {报销人}.roles</p><p>  “报销人”的姓名： {报销人}.name</p></li><li><p>基于数值字段的函数：
加：{字段名1}+{字段名2}</p><p>  减：{字段名1}-{字段名2}</p><p>  乘：{单价}*{数量}</p><p>  除：{总金额}/{数量}</p></li><li><p>基于表格（子表）中的数值字段的函数：
合计:sum({费用})</p><p>  平均值：average({费用})</p><p>  计数：count({物品})</p><p>  最大值：max({费用})</p><p>  最小值：min({费用})</p></li><li><p>统计多选项中有几项被选中了：length({交通工具})</p></li><li><p>数值类型的判断，允许使用以下符号：</p><p>  = ：等于，如：{借款金额}=1000</p><blockquote><p>：大于，如：{借款金额}&gt;1000</p></blockquote><p>  &lt; ：小于，如：{借款金额}&lt;1000</p><blockquote><p>= ：大于等于，如：sum({报销费用合计})&gt;=1000</p></blockquote><p>  &lt;= 小于等于，如：max({单笔费用金额})&lt;=1000</p><p>  != ：不等于，如：sum({借款金额})!=1000</p></li><li><p>字符类型的判断，允许使用以下符号/函数：</p><p>   =：是，如：{项目}=&quot;北京&quot;</p><p>   !=：非，如：{项目}!=&quot;北京&quot;</p><p>   <em>.contains()：包含,如：</em>.contains({applicant.roles},&#x27;部门经理&#x27;) 提交人是部门经理。</p><p>请注意：由于一个人可能承担了多个审批岗位，所以应该用_.contains（包含）来判断，而不能用“=”。</p></li><li><p>一个条件判断如果不够，可以多个条件判断组合使用。允许组合关系包括：</p><p>  ||：或，如：{借款金额}&lt;1000 ||{项目}=&quot;北京&quot;</p><p>  &amp;&amp;： 与，如：{借款金额}&lt;1000 &amp;&amp;{项目}=&quot;北京&quot;</p><p>  !:  非，如：!({借款金额}&lt;1000)</p></li></ul><ul><li><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="条件判断的实际运用"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#条件判断的实际运用" title="Direct link to heading">#</a>条件判断的实际运用</h4></li><li><p>对数值进行判断</p><p>如请假天数大于三天需要总经理审批，小于等于三天只需要人事部审核。这类型的判断还用于金额等。</p></li><li><p>对提交人进行判断</p><p>如提交人是Tony则由总经理直接审批，若不是则需要部门经理审批。如何取得提交人是谁，则通过公式的编写。</p></li><li><p>对提交人岗位进行判断</p><p>如当提交人是部门员工，则由部门经理审批；而当提交人是部门经理，则由总经理审批。条件中，首先要使用系统提供的函数来获取相关的信息。如：{applicant.roles}获取提交人的角色。</p></li><li><p>组合条件进行判断</p><p>运用或、与的关系进行多个条件组合判断。如是部门经理或者是办公室人员由办公室审批，而不是部门经理且不是办公室人员的由部门经理审批。</p></li></ul></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#条件节点" class="contents__link">条件节点</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">华炎业务开发平台</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/developer/index">关于</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/developer/guide">快速向导</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/platform/index">我的应用</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">应用案例</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/steedos/steedos-contracts-app">合同管理</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/steedos/steedos-meeting-app">会议管理</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/steedos/steedos-records-app">档案管理</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">技术支持</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item">销售热线：400-820-1612</a></li><li class="footer__item"><a class="footer__link-item" to="https://messenger.steedos.cn/" href="https://messenger.steedos.cn/">开发人员社区</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/steedos/object-server/issues">问题提交</a></li></ul></div></div><div class="text--center">Copyright © 2020 上海华炎软件科技有限公司.</div></div></footer>
</div>

<script src="/styles.df4c119b.js"></script>

<script src="/runtime~main.ba78bbe0.js"></script>

<script src="/main.7e0c6298.js"></script>

<script src="/1.260f63ba.js"></script>

<script src="/2.56d1ab18.js"></script>

<script src="/1be78505.45bc9b0a.js"></script>

<script src="/20ac7829.53e193a6.js"></script>

<script src="/17896441.647f1133.js"></script>

<script src="/b0782ce0.cd51e955.js"></script>


</body>
</html>